<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xcky.mapper.ExamPaperQuestionMapper">
    <resultMap id="ExamPaperQuestionPageVoMap" type="com.xcky.model.vo.ExamPaperQuestionPageVo">
        <result column="id" property="id"></result>
        <result column="name" property="name"></result>
        <result column="durationMinus" property="durationMinus"></result>
        <result column="totalScore" property="totalScore"></result>
        <result column="passScore" property="passScore"></result>

        <collection property="questionIds" ofType="java.lang.Long">
            <result column="questionId"></result>
        </collection>
    </resultMap>
    
    <select id="selectPaperQuestionsByMap" parameterType="java.util.Map" resultType="com.xcky.model.entity.ExamPaperQuestion">
      SELECT
        id,
        paper_id paperId,
        question_id questionId
      FROM
        exam_paper_question
      WHERE
        1=1
        <if test="null != id">
            AND id = #{id}
        </if>
        <if test="null != paperId">
            AND paper_id = #{paperId}
        </if>
        <if test="null != questionId">
            AND question_id = #{questionId}
        </if>
    </select>

    <select id="selectPaperQuestionPageVosByMap" parameterType="java.util.Map" resultMap="ExamPaperQuestionPageVoMap">
        SELECT
          p.id id,
          p.name name,
          p.duration_minus durationMinus,
          p.total_score totalScore,
          p.pass_score passScore,

          q.question_id questionId
        FROM
          exam_paper p,
          exam_paper_question q
        WHERE
          p.id = q.paper_id
          AND p.id = #{paperId}
    </select>

</mapper>
